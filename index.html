<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carteirinha do Aluno - UNIASSELVI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* slate-50 */
        }
        .modal {
            transition: opacity 300ms ease-out, transform 300ms ease-out;
        }
        .modal.hidden {
            display: none;
        }
        .modal-enter {
            opacity: 0;
            transform: scale(0.95);
        }
        .modal-enter-active {
            opacity: 1;
            transform: scale(1);
        }
        .modal-leave {
            opacity: 1;
            transform: scale(1);
        }
        .modal-leave-active {
            opacity: 0;
            transform: scale(0.95);
        }

        /* Estilos para o efeito de virar a carteirinha */
        .card-flipper-container {
            perspective: 1000px;
            filter: drop-shadow(0 10px 15px rgba(0,0,0,0.1));
        }
        .card-flipper {
            position: relative;
            transition: transform 0.8s;
            transform-style: preserve-3d;
        }
        .card-flipper.is-flipped {
            transform: rotateY(180deg);
        }
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden; /* Safari */
            backface-visibility: hidden;
        }
        .card-back {
            transform: rotateY(180deg);
        }
    </style>
</head>
<body class="bg-slate-100">

    <div id="app" class="min-h-screen flex flex-col items-center justify-center p-4">

        <!-- TELA DE LOGIN -->
        <div id="loginScreen" class="w-full max-w-sm">
            <div class="bg-white p-8 rounded-2xl shadow-xl text-center">
                <div class="mx-auto w-20 h-20 bg-yellow-100 rounded-full flex items-center justify-center mb-4 ring-8 ring-yellow-50">
                    <svg class="w-12 h-12 text-yellow-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.627 48.627 0 0 1 12 20.904a48.627 48.627 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.57 50.57 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.906 59.906 0 0 1 10.342 5.84c-.897.28-1.779.597-2.658.814m-15.482 0A50.697 50.697 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5" />
                    </svg>
                </div>
                <h1 class="text-2xl font-bold text-gray-800 mb-2">Portal do Aluno</h1>
                <p class="text-gray-500 mb-6">Acesse sua conta para continuar</p>
                <div class="space-y-4">
                    <input id="studentId" type="text" placeholder="Nº de Matrícula" class="w-full px-4 py-3 bg-slate-100 rounded-lg text-gray-700 focus:outline-none focus:ring-2 focus:ring-yellow-500">
                    <input id="password" type="password" placeholder="Senha" class="w-full px-4 py-3 bg-slate-100 rounded-lg text-gray-700 focus:outline-none focus:ring-2 focus:ring-yellow-500">
                    <button id="loginButton" class="w-full bg-yellow-500 text-white py-3 rounded-lg font-semibold hover:bg-yellow-600 transition-all shadow hover:shadow-lg">Entrar</button>
                </div>
                <p id="loginError" class="text-red-500 text-sm mt-4 hidden">Matrícula ou senha inválida.</p>
            </div>
        </div>

        <!-- TELA PRINCIPAL -->
        <div id="mainScreen" class="hidden w-full max-w-md text-center">
             <div class="bg-white p-6 rounded-2xl shadow-xl w-full">
                <h2 class="text-xl font-semibold text-gray-800">Bem-vindo(a),</h2>
                <h1 id="studentName" class="text-3xl font-bold text-yellow-600 mb-8">Nome do Aluno</h1>
                
                <div class="space-y-4">
                     <button id="showCardButton" class="w-full bg-gradient-to-br from-yellow-400 to-yellow-500 text-white py-4 px-6 rounded-xl font-semibold text-lg hover:from-yellow-500 hover:to-yellow-600 transition-all shadow-lg hover:shadow-xl flex items-center justify-center space-x-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" />
                        </svg>
                        <span>Ver Minha Carteirinha</span>
                    </button>
                     <button id="showTimetableButton" class="w-full bg-slate-100 text-slate-700 py-4 px-6 rounded-xl font-semibold hover:bg-slate-200 transition-colors flex items-center justify-center space-x-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                           <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                         <span>Meus Horários</span>
                     </button>
                     <button id="showGradesButton" class="w-full bg-slate-100 text-slate-700 py-4 px-6 rounded-xl font-semibold hover:bg-slate-200 transition-colors flex items-center justify-center space-x-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                        </svg>
                        <span>Notas e Faltas</span>
                    </button>
                </div>
            </div>
             <button id="logoutButton" class="mt-6 text-gray-500 font-medium hover:text-yellow-600">Sair</button>
        </div>
    </div>

    <!-- MODAL DA CARTEIRINHA -->
    <div id="cardModal" class="modal hidden fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-50 modal-enter">
        <div class="w-full max-w-sm">
            <div class="card-flipper-container cursor-pointer w-full h-[580px]" id="cardContainer">
                <div id="cardFlipper" class="card-flipper w-full h-full">
                    <!-- FRENTE DA CARTEIRINHA -->
                    <div class="card-face card-front">
                        <div class="bg-white rounded-2xl shadow-2xl w-full overflow-hidden h-full flex flex-col">
                            <div class="bg-gradient-to-br from-yellow-400 to-yellow-500 p-4 text-center">
                                <h3 class="font-bold text-white text-xl tracking-wide">UNIASSELVI</h3>
                            </div>
                            <div class="p-6 flex flex-col items-center flex-grow">
                                <img id="modalStudentPhoto" src="" alt="Foto do Aluno" class="w-32 h-32 rounded-full border-4 border-white -mt-20 shadow-lg object-cover">
                                <h4 id="modalStudentName" class="text-2xl font-bold text-gray-800 mt-4 text-center">Nome Completo do Aluno</h4>
                                <p id="modalStudentCourse" class="text-yellow-600 font-medium text-center">Curso do Aluno</p>
                                <div class="w-full text-left mt-6 space-y-3">
                                    <div>
                                        <span class="text-sm text-gray-400 font-bold uppercase">Matrícula</span>
                                        <p id="modalStudentId" class="text-lg font-semibold text-gray-700">000000</p>
                                    </div>
                                    <div>
                                        <span class="text-sm text-gray-400 font-bold uppercase">CPF</span>
                                        <p id="modalStudentCpf" class="text-lg font-semibold text-gray-700">000.000.000-00</p>
                                    </div>
                                    <div>
                                        <span class="text-sm text-gray-400 font-bold uppercase">Validade</span>
                                        <p id="modalStudentValidity" class="text-lg font-semibold text-gray-700">00/00/0000</p>
                                    </div>
                                </div>
                                <div class="mt-auto w-full flex justify-center py-2">
                                    <img id="qrCodeImg" src="" alt="QR Code do Aluno" class="w-28 h-28">
                                </div>
                                <p class="text-xs text-gray-400">Clique na carteirinha para virar</p>
                            </div>
                        </div>
                    </div>
                    <!-- VERSO DA CARTEIRINHA -->
                    <div class="card-face card-back">
                        <div class="bg-white rounded-2xl shadow-2xl w-full overflow-hidden h-full flex flex-col">
                            <div class="bg-gradient-to-br from-yellow-400 to-yellow-500 p-4 text-center">
                                <h3 class="font-bold text-white text-xl tracking-wide">UNIASSELVI</h3>
                            </div>
                            <div class="p-6 flex flex-col items-center flex-grow text-center">
                                <p class="font-semibold text-gray-700 mt-4">Documento de Identificação Estudantil</p>
                                <img id="barcode" src="" alt="Código de Barras" class="h-20 mt-8">
                                <div class="text-center text-xs text-gray-500 mt-8 border-t pt-4 w-full space-y-3">
                                    <p>Este documento é pessoal e intransferível.</p>
                                    <p>Válido em todo território nacional mediante apresentação de documento oficial com foto.</p>
                                    <p class="font-bold mt-4">UNIASSELVI</p>
                                    <p>Centro Universitário Leonardo da Vinci</p>
                                </div>
                                <div class="mt-auto">
                                    <p class="text-xs text-gray-400">Clique na carteirinha para virar</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <button id="closeCardButton" class="mt-4 w-full bg-white/80 backdrop-blur-sm text-gray-800 py-3 rounded-lg font-semibold hover:bg-white transition-colors">Fechar</button>
        </div>
    </div>
    
    <!-- MODAL DE HORÁRIOS -->
    <div id="timetableModal" class="modal hidden fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-2xl shadow-xl w-full max-w-md max-h-[90vh] flex flex-col">
            <div class="p-6 border-b">
                <h3 class="text-2xl font-bold text-gray-800 text-center">Meus Horários</h3>
            </div>
            <div id="timetableContent" class="p-6 space-y-6 overflow-y-auto">
                <!-- Conteúdo dos horários será injetado aqui -->
            </div>
            <div class="p-4 bg-slate-50 border-t rounded-b-2xl">
                 <button id="closeTimetableButton" class="w-full bg-slate-200 text-slate-700 py-3 rounded-lg font-semibold hover:bg-slate-300 transition-colors">Fechar</button>
            </div>
        </div>
    </div>

    <!-- MODAL DE NOTAS E FALTAS -->
    <div id="gradesModal" class="modal hidden fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-50">
         <div class="bg-white rounded-2xl shadow-xl w-full max-w-md max-h-[90vh] flex flex-col">
            <div class="p-6 border-b">
                <h3 class="text-2xl font-bold text-gray-800 text-center">Notas e Faltas</h3>
            </div>
            <div id="gradesContent" class="p-6 space-y-4 overflow-y-auto">
                <!-- Conteúdo das notas será injetado aqui -->
            </div>
            <div class="p-4 bg-slate-50 border-t rounded-b-2xl">
                 <button id="closeGradesButton" class="w-full bg-slate-200 text-slate-700 py-3 rounded-lg font-semibold hover:bg-slate-300 transition-colors">Fechar</button>
            </div>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DADOS FALSOS PARA DEMONSTRAÇÃO ---
            const fakeStudentData = {
                id: 'Mot671367',
                password: '123',
                name: 'Rodrigo L. Barroso',
                fullName: 'Rodrigo Laurindo Barroso',
                cpf: '22673912878',
                course: 'Tecnologia da Informação',
                validity: '31/12/2025',
                photoUrl: 'foto_rodrigo.jpeg' 
            };
            
            const fakeTimetableData = [
                { dia: "Segunda-feira", aulas: [
                    { horario: "19:00 - 20:40", materia: "Algoritmos e Lógica de Programação" },
                    { horario: "20:50 - 22:30", materia: "Banco de Dados" },
                ]},
                { dia: "Terça-feira", aulas: [
                    { horario: "19:00 - 22:30", materia: "Desenvolvimento Web Full Stack" },
                ]},
                { dia: "Quarta-feira", aulas: [
                    { horario: "19:00 - 20:40", materia: "Engenharia de Software" },
                    { horario: "20:50 - 22:30", materia: "Redes de Computadores" },
                ]},
                 { dia: "Sexta-feira", aulas: [
                    { horario: "19:00 - 22:30", materia: "Projeto Integrador" },
                ]},
            ];
            
            const fakeGradesData = [
                { materia: "Algoritmos e Lógica", n1: 8.5, n2: 9.0, mediaFinal: 8.8, faltas: 2 },
                { materia: "Banco de Dados", n1: 7.0, n2: 7.5, mediaFinal: 7.3, faltas: 0 },
                { materia: "Desenvolvimento Web", n1: 9.5, n2: 10.0, mediaFinal: 9.8, faltas: 1 },
                { materia: "Engenharia de Software", n1: 6.5, n2: 8.0, mediaFinal: 7.3, faltas: 4 },
                { materia: "Redes de Computadores", n1: 8.0, n2: 8.0, mediaFinal: 8.0, faltas: 0 },
                { materia: "Projeto Integrador", n1: 10.0, n2: 9.5, mediaFinal: 9.8, faltas: 0 },
            ];


            // --- SELETORES DE ELEMENTOS ---
            const loginScreen = document.getElementById('loginScreen');
            const mainScreen = document.getElementById('mainScreen');
            
            // Modais
            const cardModal = document.getElementById('cardModal');
            const timetableModal = document.getElementById('timetableModal');
            const gradesModal = document.getElementById('gradesModal');

            // Carteirinha
            const cardContainer = document.getElementById('cardContainer');
            const cardFlipper = document.getElementById('cardFlipper');
            
            // Inputs e Botões
            const studentIdInput = document.getElementById('studentId');
            const passwordInput = document.getElementById('password');
            const loginButton = document.getElementById('loginButton');
            const loginError = document.getElementById('loginError');
            const logoutButton = document.getElementById('logoutButton');
            
            const showCardButton = document.getElementById('showCardButton');
            const closeCardButton = document.getElementById('closeCardButton');
            
            const showTimetableButton = document.getElementById('showTimetableButton');
            const closeTimetableButton = document.getElementById('closeTimetableButton');
            
            const showGradesButton = document.getElementById('showGradesButton');
            const closeGradesButton = document.getElementById('closeGradesButton');


            // --- FUNÇÕES ---

            function formatCPF(cpf) {
                cpf = cpf.replace(/\D/g, ''); // Remove caracteres não numéricos
                return cpf.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, '$1.$2.$3-$4');
            }

            function handleLogin() {
                if (studentIdInput.value === fakeStudentData.id && passwordInput.value === fakeStudentData.password) {
                    loginScreen.classList.add('hidden');
                    mainScreen.classList.remove('hidden');
                    document.getElementById('studentName').textContent = fakeStudentData.name;
                    loginError.classList.add('hidden');
                } else {
                    loginError.classList.remove('hidden');
                }
            }
            
            // Funções de popular conteúdo
            function populateCardModal() {
                const formattedCpf = formatCPF(fakeStudentData.cpf);
                document.getElementById('modalStudentPhoto').src = fakeStudentData.photoUrl;
                document.getElementById('modalStudentName').textContent = fakeStudentData.fullName;
                document.getElementById('modalStudentCourse').textContent = fakeStudentData.course;
                document.getElementById('modalStudentId').textContent = fakeStudentData.id;
                document.getElementById('modalStudentValidity').textContent = fakeStudentData.validity;
                document.getElementById('modalStudentCpf').textContent = formattedCpf;
                const qrData = `UNIASSELVI\nMatrícula: ${fakeStudentData.id}\nNome: ${fakeStudentData.fullName}\nCPF: ${formattedCpf}`;
                document.getElementById('qrCodeImg').src = `https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(qrData)}&qzone=1`;
                document.getElementById('barcode').src = `https://barcode.tec-it.com/barcode.ashx?data=${fakeStudentData.id}&code=Code128&dpi=96`;
            }
            
            function populateTimetableModal() {
                const content = document.getElementById('timetableContent');
                let html = '';
                fakeTimetableData.forEach(item => {
                    html += `<div class="border-b pb-4">
                                <h4 class="text-xl font-bold text-yellow-600 mb-3">${item.dia}</h4>
                                <div class="space-y-2">`;
                    item.aulas.forEach(aula => {
                        html += `<div class="flex justify-between items-center bg-slate-100 p-3 rounded-lg">
                                    <span class="font-semibold text-gray-700">${aula.materia}</span>
                                    <span class="text-sm text-gray-500">${aula.horario}</span>
                                 </div>`;
                    });
                    html += `</div></div>`;
                });
                content.innerHTML = html;
            }
            
            function populateGradesModal() {
                const content = document.getElementById('gradesContent');
                let html = `<div class="grid grid-cols-4 gap-2 font-bold text-sm text-gray-500 border-b pb-2">
                                <span>DISCIPLINA</span>
                                <span class="text-center">N1</span>
                                <span class="text-center">N2</span>
                                <span class="text-center">FALTAS</span>
                            </div>`;
                fakeGradesData.forEach(item => {
                    const mediaColor = item.mediaFinal >= 7 ? 'text-green-600' : 'text-red-600';
                    html += `<div class="grid grid-cols-4 gap-2 items-center border-b py-3 text-sm">
                                <span class="font-semibold text-gray-800">${item.materia}</span>
                                <span class="text-center text-gray-600">${item.n1.toFixed(1)}</span>
                                <span class="text-center text-gray-600">${item.n2.toFixed(1)}</span>
                                <span class="text-center text-gray-600">${item.faltas}</span>
                             </div>
                             <div class="text-right text-sm font-bold pr-2 -mt-2">
                                Média Final: <span class="${mediaColor}">${item.mediaFinal.toFixed(1)}</span>
                             </div>`;
                });
                content.innerHTML = html;
            }


            // Funções de controle de Modal
            function openModal(modal) {
                if (modal.id === 'cardModal') populateCardModal();
                if (modal.id === 'timetableModal') populateTimetableModal();
                if (modal.id === 'gradesModal') populateGradesModal();
                
                if (modal.id === 'cardModal') cardFlipper.classList.remove('is-flipped');
                
                modal.classList.remove('hidden', 'modal-leave', 'modal-leave-active');
                modal.classList.add('modal-enter');
                requestAnimationFrame(() => modal.classList.add('modal-enter-active'));
            }

            function closeModal(modal) {
                 modal.classList.remove('modal-enter', 'modal-enter-active');
                 modal.classList.add('modal-leave');
                 requestAnimationFrame(() => modal.classList.add('modal-leave-active'));
                 setTimeout(() => modal.classList.add('hidden'), 300);
            }

            function handleLogout() {
                mainScreen.classList.add('hidden');
                loginScreen.classList.remove('hidden');
                studentIdInput.value = '';
                passwordInput.value = '';
            }

            // --- EVENT LISTENERS ---
            loginButton.addEventListener('click', handleLogin);
            passwordInput.addEventListener('keyup', (event) => {
                if (event.key === 'Enter') handleLogin();
            });
            logoutButton.addEventListener('click', handleLogout);

            // Carteirinha
            showCardButton.addEventListener('click', () => openModal(cardModal));
            closeCardButton.addEventListener('click', () => closeModal(cardModal));
            cardContainer.addEventListener('click', () => cardFlipper.classList.toggle('is-flipped'));
            closeCardButton.addEventListener('click', (event) => event.stopPropagation());
            
            // Horários
            showTimetableButton.addEventListener('click', () => openModal(timetableModal));
            closeTimetableButton.addEventListener('click', () => closeModal(timetableModal));
            
            // Notas
            showGradesButton.addEventListener('click', () => openModal(gradesModal));
            closeGradesButton.addEventListener('click', () => closeModal(gradesModal));

        });
    </script>
</body>
</html>

